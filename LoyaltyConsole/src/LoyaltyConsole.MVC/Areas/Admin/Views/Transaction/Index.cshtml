@using LoyaltyConsole.MVC.Areas.Admin.PaginatedLists
@using LoyaltyConsole.MVC.Areas.Admin.ViewModels.TransactionVMs

@model PaginatedList<TransactionGetVM>
@{
    int count = 0;
}

<!-- Content Start -->
<div class="content">
    <!-- Navbar Start -->
    <!-- Navbar End -->
    
    <!-- Table Start -->
    <div class="container-fluid pt-4 px-4">
        <div class="row g-4">
            <div class="col-12">
                <div class="bg-light rounded h-100 p-4">
                    <div style="display: flex; align-items: center;">
                        <h6 class="mb-0">TRANSACTIONS</h6>
                        <a asp-action="create" class="btn btn-success ms-3">create</a>
                    </div>
                    <div style="margin-top: 10px" class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Customer</th>
                                    <th scope="col">Business</th>
                                    <th scope="col">Date</th>
                                    <th scope="col">Spent</th>
                                    <th scope="col">Cashback</th>
                                    <th scope="col">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var rew in Model)
                                {
                                    count++;
                                    <tr>
                                        <td>@count</td>
                                        <td>@rew.Customer.FullName</td>
                                        <td>@rew.Business.ToString()</td>
                                        <td>@rew.TransactionDate</td>
                                        <td>@rew.AmountSpent</td>
                                        <td>@rew.CashbackEarned</td>
                                        <td>
                                            <a asp-action="Update" asp-route-id="@rew.Id" class="btn btn-primary">edit</a>
                                            <a asp-action="Delete" asp-route-id="@rew.Id" class="btn btn-danger">remove</a>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>

                        @if (Model.Count >= 8)
                        {
                            <div style="display: @(Model.TotalPage == 0 ? "none" : "flex"); justify-content: center">
                                <nav aria-label="...">
                                    <ul class="pagination">
                                        <li class="page-item @(Model.Prev == false ? "disabled" : "")">
                                            <a class="page-link" asp-action="index" asp-route-page="@(Model.ActivePage - 1)">Previous</a>
                                        </li>
                                        @for (int i = 1; i <= Model.TotalPage; i++)
                                        {
                                            <li class="page-item @(Model.ActivePage == i ? "active" : "")"><a class="page-link" asp-action="index" asp-route-page="@i">@i</a></li>
                                        }
                                        <li class="page-item @(Model.Next == false ? "disabled" : "")">
                                            <a class="page-link" asp-action="index" asp-route-page="@(Model.ActivePage + 1)">Next</a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        }

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Table End -->
</div>
<!-- Content End -->
